import string
import urllib2
# Use  urllib.request instead  of urllib2 for python 3 users 
import time

emailList = []
attempts = 0
total = 0
skip = 0
gmailAddress = "<Insert_Gmail_Address>"
inviteToken = "<Insert_Token>"

def insertDots(str, at):
	if at == 0:
		emailList.append(str)
		return
	newStr = str[:at] + "." + str[at:]
	for i in range(at):
		insertDots(newStr, i)

def allDots(str):
	for i in range(len(str)):
		insertDots(str, i)

allDots(gmailAddress.replace(".", ""))

total = len(emailList)
print "Count: {}".format(total)
# use ("Count: {}".format(total)) python 3
print "List: "
# use ("List: ") python 3
print emailList
# use (emailList) python 3
print

for email in emailList:
	attempts += 1
	if (attempts <= skip):
		continue
	requestUrl = "https://invites.oneplus.net/index.php?r=share/signup&success_jsonpCallback&email={0}%40gmail.com&koid={1}&_=1438677876942".format(email, inviteToken)
	print("Sending invite to " + email + "@gmail.com ({}/{}) ...".format(attempts, total))
	req = urllib2.Request(requestUrl)
	#remove req = urllib2.Request(requestUrl) python 3 users
	try:
		res = urllib2.urlopen(req)
		# use  res = urllib.request.urlopen(requestUrl) instead  of res = urllib2.urlopen(req) python 3
	except urllib2.HTTPError as e:
			# use  res = urllib2.HTTPError instead  of urllib2.HTTPError
		resCode = e.code
		print("Request Failed: {}.".format(resCode))
	except urllib2.URLError as e:
			# use  res = urllib2.URLError instead  of urllib2.URLError
		print("Request Failed: URL Error.")
	else:
		print("Successful Response.")
	time.sleep(15)
